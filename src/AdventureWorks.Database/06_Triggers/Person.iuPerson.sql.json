{
  "triggerName": "iuPerson",
  "schemaName": "Person",
  "definition": "\r\nCREATE TRIGGER [Person].[iuPerson] ON [Person].[Person] \r\nAFTER INSERT, UPDATE NOT FOR REPLICATION AS \r\nBEGIN\r\n    DECLARE @Count int;\r\n\r\n    SET @Count = @@ROWCOUNT;\r\n    IF @Count = 0 \r\n        RETURN;\r\n\r\n    SET NOCOUNT ON;\r\n\r\n    IF UPDATE([BusinessEntityID]) OR UPDATE([Demographics]) \r\n    BEGIN\r\n        UPDATE [Person].[Person] \r\n        SET [Person].[Person].[Demographics] = N'<IndividualSurvey xmlns=\u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022> \r\n            <TotalPurchaseYTD>0.00</TotalPurchaseYTD> \r\n            </IndividualSurvey>' \r\n        FROM inserted \r\n        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] \r\n            AND inserted.[Demographics] IS NULL;\r\n        \r\n        UPDATE [Person].[Person] \r\n        SET [Demographics].modify(N'declare default element namespace \u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022; \r\n            insert <TotalPurchaseYTD>0.00</TotalPurchaseYTD> \r\n            as first \r\n            into (/IndividualSurvey)[1]') \r\n        FROM inserted \r\n        WHERE [Person].[Person].[BusinessEntityID] = inserted.[BusinessEntityID] \r\n            AND inserted.[Demographics] IS NOT NULL \r\n            AND inserted.[Demographics].exist(N'declare default element namespace \r\n                \u0022http://schemas.microsoft.com/sqlserver/2004/07/adventure-works/IndividualSurvey\u0022; \r\n                /IndividualSurvey/TotalPurchaseYTD') <> 1;\r\n    END;\r\nEND;\r\n",
  "tableName": "Person"
}